<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge"/>
    <title></title>
    <link rel="stylesheet" type="text/css" media="screen" th:href="@{css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" media="screen" th:href="@{css/font-awesome.min.css}"/>
    <link rel="stylesheet" type="text/css" media="screen" th:href="@{css/smartadmin-production-plugins.min.css}"/>
    <link rel="stylesheet" type="text/css" media="screen" th:href="@{css/smartadmin-production.min.css}"/>
    <link rel="stylesheet" type="text/css" media="screen" th:href="@{css/smartadmin-skins.min.css}"/>
    <link rel="stylesheet" type="text/css" media="screen"
          th:href="@{css/plugin/datetimepicker/bootstrap-datetimepicker.min.css}"/>
    <link rel="stylesheet" type="text/css" media="screen" th:href="@{css/plugin/fileinput/fileinput.min.css}"/>
    <link rel="stylesheet" type="text/css" media="screen" th:href="@{css/OpenSans.css}"/>
</head>
<body class="smart-style-0 fixed-header fixed-page-footer fixed-ribbon">
<!-- #HEADER -->
<header id="header">
    <div id="logo-group">
        <!-- PLACE YOUR LOGO HERE -->
        <span id="logo"> <img src="/img/logo-in.png"/> </span>
        <!-- END LOGO PLACEHOLDER -->

        <!-- Note: The activity badge color changes when clicked and resets the number to 0
             Suggestion: You may want to set a flag when this happens to tick off all checked messages / notifications -->
        <span id="activity" class="activity-dropdown" onclick="window.location='#/common/task/todo';"
              th:if="${user.type=='USER_TYPE_SYSTEM'}"> <i class="fa fa-user"></i> <b id="taskCount" class="badge bg-color-red bounceIn animated"
                                                                                      style="display: none;"> </b> </span>
        <!-- AJAX-DROPDOWN : control this dropdown height, look and feel from the LESS variable file -->
        <!-- END AJAX-DROPDOWN -->
    </div>

    <!-- #TOGGLE LAYOUT BUTTONS -->
    <!-- pulled right: nav area -->
    <div class="pull-right">

        <!-- collapse menu button -->
        <div id="hide-menu" class="btn-header pull-right">
            <span> <a href="javascript:void(0);" data-action="toggleMenu" title="Collapse Menu"><i
                    class="fa fa-reorder"></i></a> </span>
        </div>
        <!-- end collapse menu -->

        <!-- #MOBILE -->
        <!-- Top menu profile link : this shows only when top menu is active -->
        <ul id="mobile-profile-img" class="header-dropdown-list hidden-xs padding-5">
            <li class="">
                <a href="#" class="dropdown-toggle no-margin userdropdown" data-toggle="dropdown">
                    <img src="img/avatars/timg.jpg" alt="John Doe" class="online"/>
                </a>
                <ul class="dropdown-menu pull-right">
                    <li>
                        <a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0"><i
                                class="fa fa-cog"></i> Setting</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#ajax/profile.html" class="padding-10 padding-top-0 padding-bottom-0"> <i
                                class="fa fa-user"></i> <u>P</u>rofile</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0"
                           data-action="toggleShortcut"><i class="fa fa-arrow-down"></i> <u>S</u>hortcut</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0"
                           data-action="launchFullscreen"><i class="fa fa-arrows-alt"></i> Full <u>S</u>creen</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="login.html" class="padding-10 padding-top-5 padding-bottom-5" data-action="userLogout"><i
                                class="fa fa-sign-out fa-lg"></i> <strong><u>L</u>ogout</strong></a>
                    </li>
                </ul>
            </li>
        </ul>

        <!-- logout button -->
        <div id="logout" class="btn-header transparent pull-right">
            <span> <a href="login.html" title="退出系统" data-action="userLogout"
                      data-logout-msg="安全起见，建议退出后关闭浏览器！"><i
                    class="fa fa-sign-out"></i></a> </span>
        </div>
        <!-- end logout button -->

        <!-- fullscreen button -->
        <div id="fullscreen" class="btn-header transparent pull-right">
            <span> <a href="javascript:void(0);" data-action="launchFullscreen" title="全屏显示"><i
                    class="fa fa-arrows-alt"></i></a> </span>
        </div>
        <!-- end fullscreen button -->

    </div>
    <!-- end pulled right: nav area -->
</header>

<!-- #NAVIGATION -->
<!-- Left panel : Navigation area -->
<!-- Note: This width of the aside area can be adjusted through LESS/SASS variables -->
<aside id="left-panel">
    <!-- User info -->
    <div class="login-info">
				<span> <!-- User image size is adjusted inside CSS, it should stay as is -->

					<a href="javascript:void(0);" id="show-shortcut" data-action="toggleShortcut">
						<img src="img/avatars/timg.jpg" alt="me" class="online"/>
						<span>
							<shiro:principal property="email"/>
						</span>
					</a>

				</span>
    </div>
    <!-- end user info -->
    <nav>
        <ul>
            <li>
                <a href="dashboard.html"><i class="fa fa-lg fa-fw fa-home"></i> <span
                        class="menu-item-parent">控制台</span></a>
            </li>
            <li th:each="permission:${permissions}">
                <a th:href="${permission.url}">
                    <i th:class="'fa fa-lg fa-fw '+${permission.css}"></i>
                    <span class="menu-item-parent" th:text="${permission.name}"></span>
                    <span class="badge bg-color-red bounceIn animated pull-right inbox-badge margin-right-13" th:id="${permission.mask}" style="display: none"></span>
                </a>
            </li>
        </ul>
    </nav>
    <span class="minifyme" data-action="minifyMenu"> <i class="fa fa-arrow-circle-left hit"></i> </span>
</aside>
<!-- END NAVIGATION -->

<!-- #MAIN PANEL -->
<div id="main" role="main">

    <!-- RIBBON -->
    <div id="ribbon">

				<span class="ribbon-button-alignment">
					<span id="refresh" class="btn btn-ribbon" data-action="resetWidgets" data-title="refresh"
                          rel="tooltip" data-placement="bottom"
                          data-original-title="<i class='text-warning fa fa-warning'></i> 警告! 此操作会重置你所有窗口的本地设置."
                          data-html="true"
                          data-reset-msg="你确定要重置你所有窗口的本地设置吗？"><i
                            class="fa fa-refresh"></i></span>
				</span>

        <!-- breadcrumb -->
        <ol class="breadcrumb"></ol>
        <!-- end breadcrumb -->

        <!-- You can also add more buttons to the
        ribbon for further usability

        Example below:

        <span class="ribbon-button-alignment pull-right" style="margin-right:25px">
            <a href="#" id="search" class="btn btn-ribbon hidden-xs" data-title="search"><i class="fa fa-grid"></i> Change Grid</a>
            <span id="add" class="btn btn-ribbon hidden-xs" data-title="add"><i class="fa fa-plus"></i> Add</span>
            <button id="search" class="btn btn-ribbon" data-title="search"><i class="fa fa-search"></i> <span class="hidden-mobile">Search</span></button>
        </span> -->

    </div>
    <!-- END RIBBON -->

    <!-- #MAIN CONTENT -->
    <div id="content">

    </div>

    <!-- END #MAIN CONTENT -->

</div>
<!-- END #MAIN PANEL -->

<!-- #PAGE FOOTER -->
<div class="page-footer">
    <div class="row">
        <div class="col-xs-12 col-sm-6">
            <span class="txt-color-white">小桔灯 <span class="hidden-xs"> - 营销平台</span> © 2017</span>
        </div>

        <div class="col-xs-6 col-sm-6 text-right hidden-xs">
            <div class="txt-color-white inline-block">
                <i class="txt-color-blueLight hidden-mobile">最后活动时间 <i class="fa fa-clock-o"></i>
                    <strong>52分钟之前 &nbsp;</strong> </i>
            </div>
            <!-- end div-->
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->
</div>
<!-- END FOOTER -->


<!-- Dynamic Modal -->
<div class="modal fade" id="homeModal" tabindex="-1" role="dialog" aria-labelledby="homeModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
        </div>
    </div>
</div>
<!-- /.modal -->

<script th:src="@{js/jquery.min.js}"></script>
<script th:src="@{js/jquery-ui.min.js}"></script>
<script th:src="@{js/app.config.js}"></script>
<script th:src="@{js/plugin/jquery-touch/jquery.ui.touch-punch.min.js}"></script>
<script th:src="@{js/bootstrap.min.js}"></script>
<script th:src="@{js/notification/SmartNotification.min.js}"></script>
<script th:src="@{js/smartwidgets/jarvis.widget.min.js}"></script>
<script th:src="@{js/plugin/sparkline/jquery.sparkline.min.js}"></script>
<script th:src="@{js/plugin/jquery-validate/jquery.validate.min.js}"></script>
<script th:src="@{js/plugin/masked-input/jquery.maskedinput.min.js}"></script>
<script th:src="@{js/plugin/select2/select2.min.js}"></script>
<script th:src="@{js/plugin/bootstrap-slider/bootstrap-slider.min.js}"></script>
<script th:src="@{js/plugin/msie-fix/jquery.mb.browser.min.js}"></script>
<script th:src="@{js/plugin/fastclick/fastclick.min.js}"></script>
<script th:src="@{js/plugin/moment.js}"></script>
<script th:src="@{js/plugin/datetimepicker/bootstrap-datetimepicker.min.js}"></script>
<script th:src="@{js/plugin/datetimepicker/bootstrap-datetimepicker.zh-CN.js}"></script>
<script th:src="@{js/plugin/fileinput/fileinput.min.js}"></script>
<script th:src="@{js/plugin/fileinput/zh.js}"></script>
<script th:src="@{js/app.min.js}"></script>
<script th:src="@{js/settings.js}"></script>

<script th:if="${user.type=='USER_TYPE_SYSTEM'}">
    $(function () {
        function checkTask() {
            $.ajax({
                url:'/alert/task',
                type:'POST',
                success: function (d) {
                    if(d>0){
                        $("#taskCount").html(d);
                        $("#taskCount").show();
                    }
                    else $("#taskCount").hide();
                }
            });
        }
        setInterval(checkTask, 10000);
    });
</script>
<script shiro:hasPermission="/stock/index">
    $(function () {
        function checkStock() {
            $.ajax({
                url:'/alert/stock',
                type:'POST',
                success: function (d) {
                    if(d>0){
                        $("#PERMISSION_STOCK").html(d);
                        $("#PERMISSION_STOCK").show();
                    }
                    else $("#PERMISSION_STOCK").hide();
                }
            });
        }
        setInterval(checkStock, 10000);
    });
</script>
<script shiro:hasPermission="/sale/list">
    $(function () {
        function checkStocks() {
            $.ajax({
                url:'/alert/stock',
                type:'POST',
                success: function (d) {
                    if(d>0){
                        $("#PERMISSION_SALE_LIST").html(d);
                        $("#PERMISSION_SALE_LIST").show();
                    }
                    else $("#PERMISSION_SALE_LIST").hide();
                }
            });
        }
        setInterval(checkStocks, 10000);
    });
</script>
<script shiro:hasPermission="/purchasingorder/index">
    $(function () {
        function checkPo() {
            $.ajax({
                url:'/alert/po',
                type:'POST',
                success: function (d) {
                    if(d>0){
                        $("#PERMISSION_PURCHASING_ORDER").html(d);
                        $("#PERMISSION_PURCHASING_ORDER").show();
                    }
                    else $("#PERMISSION_PURCHASING_ORDER").hide();
                }
            });
        }
        setInterval(checkPo, 10000);
    });
</script>
<script shiro:hasPermission="/stock/purchasing-in-list">
    $(function () {
        function checkStockin() {
            $.ajax({
                url:'/alert/stockin',
                type:'POST',
                success: function (d) {
                    if(d>0){
                        $("#PERMISSION_STOCK_PURCHASING_IN").html(d);
                        $("#PERMISSION_STOCK_PURCHASING_IN").show();
                    }
                    else $("#PERMISSION_STOCK_PURCHASING_IN").hide();
                }
            });
        }
        setInterval(checkStockin, 10000);
    });
</script>
<script shiro:hasPermission="/stock/list/STOCK-OUT">
    $(function () {
        function checkStockout() {
            $.ajax({
                url:'/alert/stockout',
                type:'POST',
                success: function (d) {
                    if(d>0){
                        $("#PERMISSION_DELIVERY").html(d);
                        $("#PERMISSION_DELIVERY").show();
                    }
                    else $("#PERMISSION_DELIVERY").hide();
                }
            });
        }
        setInterval(checkStockout, 10000);
    });
</script>
</body>
</html>